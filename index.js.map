{"version":3,"file":"index.js","sources":["../src/js/members-swiper.js","../src/js/members-back-flip.js"],"sourcesContent":["import Swiper from 'swiper/bundle';\nimport 'swiper/css/bundle';\n\nconst swiper = new Swiper('.members-swiper-init', {\n  loop: false,\n  slidesPerView: 1,\n  spaceBetween: 12,\n\n  pagination: {\n    el: '.swiper-pagination',\n    clickable: true,\n    type: 'bullets',\n  },\n  breakpoints: {\n    768: {\n     slidesPerView: 1.64,\n      spaceBetween: 14,\n      centeredSlides: true,\n      centeredSlidesBounds: true,\n      slidesPerGroup: 1,\n    },\n\n    1440: {\n      slidesPerView: 3,\n      slidesPerGroup: 3,\n      spaceBetween: 24,\n\n    },\n  },\n});\n\nfunction setSlideA11y(sw) {\n  const total = sw.slides.length;\n\n  sw.slides.forEach((slide, i) => {\n    slide.removeAttribute('role');\n    slide.setAttribute('aria-roledescription', 'slide');\n    slide.setAttribute('aria-label', `${i + 1} ли ${total}`);\n    slide.setAttribute('tabindex', '-1');\n  });\n\n  const active = sw.slides[sw.activeIndex];\n  if (active) active.setAttribute('tabindex', '0');\n}\n\nsetSlideA11y(swiper);\nswiper.on('slideChange', () => setSlideA11y(swiper));\nswiper.on('slidesLengthChange', () => setSlideA11y(swiper));","function shouldEnableTapFlip() {\n  const isDesktopInteraction = window.matchMedia('(hover: hover) and (pointer: fine)').matches;\n  const isDesktopWidth = window.matchMedia('(min-width: 1440px)').matches;\n  return !isDesktopInteraction && !isDesktopWidth;\n}\n\nfunction initTapFlip(swiper) {\n  const root = document.querySelector('.members-swiper-init');\n  if (!root) return () => {};\n\n  const getSlides = () => root.querySelectorAll('.swiper-slide.overlay');\n  const closeAll = () => getSlides().forEach(s => s.classList.remove('is-flipped'));\n\n  let startX = 0;\n  let startY = 0;\n  let moved = false;\n\n  const onPointerDown = (e) => {\n    const slide = e.target.closest('.swiper-slide.overlay');\n    if (!slide) return;\n    startX = e.clientX;\n    startY = e.clientY;\n    moved = false;\n  };\n\n  const onPointerMove = (e) => {\n    const dx = Math.abs(e.clientX - startX);\n    const dy = Math.abs(e.clientY - startY);\n\n\n    if (!moved && (dx > 8 || dy > 8)) {\n      moved = true;\n      closeAll();\n    }\n  };\n\n  const onPointerUp = (e) => {\n    const slide = e.target.closest('.swiper-slide.overlay');\n    if (!slide) return;\n\n\n    if (moved) return;\n\n    const wasOpen = slide.classList.contains('is-flipped');\n    closeAll();\n    if (!wasOpen) slide.classList.add('is-flipped');\n  };\n\n  root.addEventListener('pointerdown', onPointerDown, { passive: true });\n  root.addEventListener('pointermove', onPointerMove, { passive: true });\n  root.addEventListener('pointerup', onPointerUp, { passive: true });\n\n\n  if (swiper?.on) {\n    swiper.on('sliderFirstMove', closeAll);\n    swiper.on('slideChangeTransitionStart', closeAll);\n  }\n\n  return () => {\n    root.removeEventListener('pointerdown', onPointerDown);\n    root.removeEventListener('pointermove', onPointerMove);\n    root.removeEventListener('pointerup', onPointerUp);\n  };\n}\n\nlet cleanupTapFlip = () => {};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const setup = () => {\n    cleanupTapFlip();\n\n    if (shouldEnableTapFlip()) {\n      cleanupTapFlip = initTapFlip(window.swiper);\n    } else {\n\n      document.querySelectorAll('.swiper-slide.overlay').forEach(s => s.classList.remove('is-flipped'));\n    }\n  };\n\n  setup();\n  window.addEventListener('resize', setup);\n  window.addEventListener('orientationchange', setup);\n});"],"names":["swiper","Swiper","setSlideA11y","sw","total","slide","i","active","shouldEnableTapFlip","isDesktopInteraction","isDesktopWidth","initTapFlip","root","getSlides","closeAll","startX","startY","moved","onPointerDown","e","onPointerMove","dx","dy","onPointerUp","wasOpen","cleanupTapFlip","setup","s"],"mappings":"svBAGA,MAAMA,EAAS,IAAIC,EAAO,uBAAwB,CAChD,KAAM,GACN,cAAe,EACf,aAAc,GAEd,WAAY,CACV,GAAI,qBACJ,UAAW,GACX,KAAM,SACV,EACE,YAAa,CACX,IAAK,CACJ,cAAe,KACd,aAAc,GACd,eAAgB,GAChB,qBAAsB,GACtB,eAAgB,CACtB,EAEI,KAAM,CACJ,cAAe,EACf,eAAgB,EAChB,aAAc,EAEpB,CACA,CACA,CAAC,EAED,SAASC,EAAaC,EAAI,CACxB,MAAMC,EAAQD,EAAG,OAAO,OAExBA,EAAG,OAAO,QAAQ,CAACE,EAAOC,IAAM,CAC9BD,EAAM,gBAAgB,MAAM,EAC5BA,EAAM,aAAa,uBAAwB,OAAO,EAClDA,EAAM,aAAa,aAAc,GAAGC,EAAI,CAAC,MAAMF,CAAK,EAAE,EACtDC,EAAM,aAAa,WAAY,IAAI,CACrC,CAAC,EAED,MAAME,EAASJ,EAAG,OAAOA,EAAG,WAAW,EACnCI,GAAQA,EAAO,aAAa,WAAY,GAAG,CACjD,CAEAL,EAAaF,CAAM,EACnBA,EAAO,GAAG,cAAe,IAAME,EAAaF,CAAM,CAAC,EACnDA,EAAO,GAAG,qBAAsB,IAAME,EAAaF,CAAM,CAAC,EC/C1D,SAASQ,GAAsB,CAC7B,MAAMC,EAAuB,OAAO,WAAW,oCAAoC,EAAE,QAC/EC,EAAiB,OAAO,WAAW,qBAAqB,EAAE,QAChE,MAAO,CAACD,GAAwB,CAACC,CACnC,CAEA,SAASC,EAAYX,EAAQ,CAC3B,MAAMY,EAAO,SAAS,cAAc,sBAAsB,EAC1D,GAAI,CAACA,EAAM,MAAO,IAAM,CAAC,EAEzB,MAAMC,EAAY,IAAMD,EAAK,iBAAiB,uBAAuB,EAC/DE,EAAW,IAAMD,EAAS,EAAG,QAAQ,GAAK,EAAE,UAAU,OAAO,YAAY,CAAC,EAEhF,IAAIE,EAAS,EACTC,EAAS,EACTC,EAAQ,GAEZ,MAAMC,EAAiBC,GAAM,CACbA,EAAE,OAAO,QAAQ,uBAAuB,IAEtDJ,EAASI,EAAE,QACXH,EAASG,EAAE,QACXF,EAAQ,GACV,EAEMG,EAAiBD,GAAM,CAC3B,MAAME,EAAK,KAAK,IAAIF,EAAE,QAAUJ,CAAM,EAChCO,EAAK,KAAK,IAAIH,EAAE,QAAUH,CAAM,EAGlC,CAACC,IAAUI,EAAK,GAAKC,EAAK,KAC5BL,EAAQ,GACRH,EAAQ,EAEZ,EAEMS,EAAeJ,GAAM,CACzB,MAAMd,EAAQc,EAAE,OAAO,QAAQ,uBAAuB,EAItD,GAHI,CAACd,GAGDY,EAAO,OAEX,MAAMO,EAAUnB,EAAM,UAAU,SAAS,YAAY,EACrDS,EAAQ,EACHU,GAASnB,EAAM,UAAU,IAAI,YAAY,CAChD,EAEA,OAAAO,EAAK,iBAAiB,cAAeM,EAAe,CAAE,QAAS,GAAM,EACrEN,EAAK,iBAAiB,cAAeQ,EAAe,CAAE,QAAS,GAAM,EACrER,EAAK,iBAAiB,YAAaW,EAAa,CAAE,QAAS,GAAM,EAG7DvB,GAAA,MAAAA,EAAQ,KACVA,EAAO,GAAG,kBAAmBc,CAAQ,EACrCd,EAAO,GAAG,6BAA8Bc,CAAQ,GAG3C,IAAM,CACXF,EAAK,oBAAoB,cAAeM,CAAa,EACrDN,EAAK,oBAAoB,cAAeQ,CAAa,EACrDR,EAAK,oBAAoB,YAAaW,CAAW,CACnD,CACF,CAEA,IAAIE,EAAiB,IAAM,CAAC,EAE5B,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMC,EAAQ,IAAM,CAClBD,EAAc,EAEVjB,EAAmB,EACrBiB,EAAiBd,EAAY,OAAO,MAAM,EAG1C,SAAS,iBAAiB,uBAAuB,EAAE,QAAQgB,GAAKA,EAAE,UAAU,OAAO,YAAY,CAAC,CAEpG,EAEAD,EAAK,EACL,OAAO,iBAAiB,SAAUA,CAAK,EACvC,OAAO,iBAAiB,oBAAqBA,CAAK,CACpD,CAAC"}